from os.path import join as pjoin

configfile: "config.yaml"

DATA_DIR = config.get("data_dir", "../data/")
RAW_DATA_DIR = pjoin(DATA_DIR, "raw")
DERIVED_DATA_DIR = pjoin(DATA_DIR, "derived")
RESULTS_DIR = "../results/"


rule all:
    input:
        pjoin(RESULTS_DIR, "summary.txt"),


rule process_data:
    """Example rule: process raw data into a derived dataset."""
    input:
        pjoin(RAW_DATA_DIR, "{dataset}.csv"),
    output:
        pjoin(DERIVED_DATA_DIR, "{dataset}.processed.csv"),
    shell:
        "python scripts/process_data.py {input} {output}"


rule summarize:
    """Example rule: generate a summary from processed data."""
    input:
        pjoin(DERIVED_DATA_DIR, "example.processed.csv"),
    output:
        pjoin(RESULTS_DIR, "summary.txt"),
    shell:
        "python scripts/summarize.py {input} {output}"
